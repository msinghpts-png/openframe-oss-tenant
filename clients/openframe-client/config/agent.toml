# OpenFrame Configuration

[server]
url = "https://api.openframe.org"
check_interval = 3600  # Update check interval in seconds
api_timeout = 30  # API request timeout in seconds
retry_interval = 300  # Retry interval for failed connections in seconds
max_retries = 3  # Maximum number of retry attempts

[agent]
id = ""  # Will be auto-generated on first run if empty
name = ""  # Custom agent name (defaults to hostname)
log_level = "debug"  # Changed from info to debug for more verbose logging
update_channel = "stable"  # stable, beta, nightly
working_dir = ""  # Custom working directory (defaults to system-specific path)
temp_dir = ""  # Custom temporary directory (defaults to system temp)

[logging]
file_enabled = true
max_files = 5  # Maximum number of rotated log files
compress = true  # Compress rotated log files
structured = true  # Enable structured JSON logging
shipping_enabled = false  # Enable log shipping to central collector
shipping_endpoint = ""  # Log shipping endpoint URL
retention_days = 30  # Number of days to keep logs
metrics_enabled = true  # Enable metrics collection
console_enabled = true  # Enable console logging (for development)
log_path = "/Library/Logs/OpenFrame"  # Explicit log path for macOS

[metrics]
enabled = true
collection_interval = 60  # Metrics collection interval in seconds
disk_usage = true  # Collect disk usage metrics
memory_usage = true  # Collect memory usage metrics
cpu_usage = true  # Collect CPU usage metrics
network_usage = true  # Collect network usage metrics
process_stats = true  # Collect process statistics
custom_metrics = []  # List of custom metrics to collect

[security]
tls_verify = true
certificate_path = ""  # Optional: Path to custom certificate (empty = auto-detect)
private_key_path = ""  # Optional: Path to private key
ca_certificates = []  # List of additional CA certificates
min_tls_version = "1.2"  # Minimum TLS version
cipher_list = []  # List of allowed cipher suites

[monitoring]
health_check_interval = 300  # Health check interval in seconds
alert_threshold = 90  # Resource usage alert threshold (percentage)
notification_url = ""  # Webhook URL for notifications
critical_services = []  # List of critical services to monitor

[updates]
auto_update = true
update_check_interval = 86400  # Update check interval in seconds
download_timeout = 1800  # Update download timeout in seconds
backup_enabled = true  # Backup before updating
backup_path = ""  # Custom backup path
pre_update_script = ""  # Script to run before update
post_update_script = ""  # Script to run after update

[integration]
meshcentral_enabled = false
meshcentral_url = ""
meshcentral_token = ""

tactical_rmm_enabled = false
tactical_rmm_url = ""
tactical_rmm_token = ""

fleet_mdm_enabled = false
fleet_mdm_url = ""
fleet_mdm_token = ""

authentik_enabled = false
authentik_url = ""
authentik_token = ""

[debug]
trace_enabled = true  # Enable detailed tracing for diagnosing issues
profile_enabled = false  # Enable performance profiling
heap_profile = false  # Enable heap profiling
debug_port = 0  # Debug port (0 to disable) 